---
import "../styles/global.css";

type Props = {
  title?: string;
  description?: string;
  keywords?: string;
  robots?: string;
  ogImage?: string;
};

const {
  title = "オンライン英会話 おすすめ比較・ランキング",
  description = "オンライン英会話のおすすめを目的別（総合/日常/ビジネス）に比較。料金・特徴・無料体験・公式サイト導線までまとめてチェックできます。",
  keywords = "オンライン英会話,オンライン英会話 おすすめ,おすすめ,人気,比較,ランキング",
  robots,
  ogImage = "/favicon.svg",
} = Astro.props satisfies Props;

const siteUrl = Astro.site ? new URL(Astro.site) : new URL(Astro.url.origin);
const canonical = new URL(Astro.url.pathname, siteUrl).toString();
const ogImageAbs = new URL(ogImage, siteUrl).toString();

const defaultRobots = "index,follow,max-image-preview:large,max-snippet:-1,max-video-preview:-1";

const orgName = "eigoonline";
const orgLogo = new URL("/eigoonline_logo.png", siteUrl).toString();
const orgUrl = siteUrl.toString().replace(/\/$/, "");

const jsonLd = [
  {
    "@context": "https://schema.org",
    "@type": "Organization",
    "@id": `${orgUrl}#organization`,
    name: orgName,
    url: orgUrl,
    logo: {
      "@type": "ImageObject",
      url: orgLogo,
    },
  },
  {
    "@context": "https://schema.org",
    "@type": "WebSite",
    "@id": `${orgUrl}#website`,
    url: orgUrl,
    name: title,
    publisher: { "@id": `${orgUrl}#organization` },
    inLanguage: "ja-JP",
  },
  {
    "@context": "https://schema.org",
    "@type": "WebPage",
    "@id": `${canonical}#webpage`,
    url: canonical,
    name: title,
    description,
    isPartOf: { "@id": `${orgUrl}#website` },
    inLanguage: "ja-JP",
  },
];
---

<!doctype html>
<html lang="ja">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" type="image/svg+xml" href="/favicon.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1, user-scalable=0" />
    <meta name="generator" content={Astro.generator} />
    <!-- Avoid leaking full referrer data to external sites -->
    <meta name="referrer" content="no-referrer" />
    <!-- Disable legacy interest-cohort/FLoC-style tracking -->
    <meta http-equiv="Permissions-Policy" content="interest-cohort=()" />

    <meta name="robots" content={robots ?? defaultRobots} />
    <meta name="keywords" content={keywords} />
    <title>{title}</title>
    <meta name="description" content={description} />
    <link rel="canonical" href={canonical} />
    <link rel="alternate" hrefLang="ja" href={canonical} />
    <meta name="theme-color" content="#0ea5e9" />

    <meta property="og:title" content={title} />
    <meta property="og:description" content={description} />
    <meta property="og:type" content="website" />
    <meta property="og:url" content={canonical} />
    <meta property="og:site_name" content={orgName} />
    <meta property="og:locale" content="ja_JP" />
    <meta property="og:image" content={ogImageAbs} />

    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content={title} />
    <meta name="twitter:description" content={description} />
    <meta name="twitter:image" content={ogImageAbs} />

    <script type="application/ld+json" set:html={JSON.stringify(jsonLd)}></script>
  </head>
  <body class="min-h-dvh overflow-x-hidden bg-white text-zinc-900 antialiased">
    <slot />
  </body>
</html>

