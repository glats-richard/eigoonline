---
import SidebarBanner from "./SidebarBanner.astro";

type School = { name: string; officialUrl: string; logoUrl?: string | null };

type Props = {
  bannersTop?: { href: string; image: string; alt: string; label?: string }[];
  bannersMid?: { href: string; image: string; alt: string; label?: string }[];
  bannersBottom?: { href: string; image: string; alt: string; label?: string }[];
  popular: School[];
  categories: { title: string; href: string }[];
};

const { bannersTop = [], bannersMid = [], bannersBottom = [], popular, categories } = Astro.props satisfies Props;
---

<aside class="space-y-4">
  {bannersTop.length ? <SidebarBanner heading="おすすめバナー" items={bannersTop} /> : null}

  {categories.length ? (
    <section class="rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm">
      <h3 class="text-base font-extrabold text-zinc-900">カテゴリ別ランキング</h3>
      <div class="mt-4 grid gap-2">
        {categories.map((c) => (
          <a href={c.href} class="rounded-xl border border-zinc-200 bg-zinc-50 px-4 py-3 text-sm font-bold text-zinc-800 hover:bg-zinc-100">
            {c.title}
          </a>
        ))}
      </div>
    </section>
  ) : null}

  {popular.length ? (
    <section class="rounded-2xl border border-zinc-200 bg-white p-5 shadow-sm">
      <h3 class="text-base font-extrabold text-zinc-900">人気のオンライン英会話一覧</h3>
      <div class="mt-4 grid gap-2">
        {popular.map((s) => (
          <a
            href={s.officialUrl}
            target="_blank"
            rel="nofollow sponsored noopener noreferrer"
            referrerpolicy="no-referrer"
            class="flex min-w-0 items-center gap-3 rounded-xl border border-zinc-200 bg-white px-4 py-2.5 hover:bg-zinc-50"
          >
            <span class="flex min-w-0 flex-1 items-center gap-2">
              {s.logoUrl ? (
                <img
                  src={s.logoUrl}
                  alt=""
                  loading="lazy"
                  decoding="async"
                  class="h-5 w-auto max-w-[72px] shrink-0 object-contain"
                />
              ) : null}
              <span class="min-w-0 truncate text-sm font-extrabold text-zinc-900">{s.name}</span>
            </span>
            <span class="shrink-0 text-xs font-bold text-zinc-500">↗</span>
          </a>
        ))}
      </div>
    </section>
  ) : null}

  {bannersMid.length ? <SidebarBanner heading="おすすめバナー" items={bannersMid} /> : null}
  {bannersBottom.length ? <SidebarBanner heading="おすすめバナー" items={bannersBottom} /> : null}
</aside>

