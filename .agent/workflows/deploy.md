---
description: コードをコミット・プッシュし、本番デプロイの成功を確認するワークフロー
---

## 1. 変更をコミット

```bash
git add -A && git commit -m "<コミットメッセージ>"
```

## 2. プッシュ

// turbo
```bash
git push
```

## 3. デプロイ完了を待つ

Railwayのデプロイには3〜5分ほどかかるため、まず待機する。

## 4. デプロイ確認（ヘルスチェック）

デバッグエンドポイントにリクエストしてレスポンスが返ることを確認する。

// turbo
```bash
curl -s -o /dev/null -w "%{http_code}" https://eigoonline.com/api/debug/env
```

- **200** が返ればデプロイ成功
- **502 / 503 / タイムアウト** の場合はまだデプロイ中、30秒ほど待って再試行

## 5. 本番レスポンスのスモークテスト

変更がAPIに反映されているかを確認する。

// turbo
```bash
curl -s https://eigoonline.com/api/debug/env | cat
```

- `hasWebhookSecret` などの値が期待通りか確認
- 新しいエンドポイントがある場合は合わせてリクエストして確認する

## 6. 結果の報告

- すべて成功した場合は、ユーザーに完了を報告する
- 失敗した場合は、エラー内容を伝えて対処方針を提示する
